{% extends "main-template.html" %}
{% block title %}Servers{% endblock %}
{% block content %}
<div class="container-fluid">
    <h3 class="text-dark mb-4">Servers List</h3>
    <div class="card shadow">
       <div class="card-header py-3">
          <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">
          Add New Server <i class="fa fa-plus"></i>
          </button>
          <!-- <button class="btn btn-primary" type="button" style="padding: 6px;margin: 0px 0px 0px 15px ;">
          Edit Selected Server <i class="fa fa-edit"></i>
          </button> -->
          
       </div>
       <!-- Add server modal -->
       <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
             <div class="modal-content">
                <div class="modal-header">
                   <h5 class="modal-title" id="exampleModalLabel">Add New Server:</h5>
                   <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                   <span aria-hidden="true">&times;</span>
                   </button>
                </div>
                <div class="modal-body">
                   <form method="POST" action="/add_server">
                      <div class="form-row">
                         <div class="col">
                            <div class="form-group"><label for="username"><strong>hostname</strong></label><input class="form-control" type="text" placeholder="hostname" name="hostname" required></div>
                         </div>
                         <div class="col-xl-1"></div>
                         <div class="col">
                            <div class="form-group"><label for="email"><strong>Datacenter</strong><br></label><input class="form-control" type="text" placeholder="datacenter name" name="dcname" required></div>
                         </div>
                      </div>
                      <div class="form-row">
                         <div class="col">
                            <div class="form-group"><label for="first_name"><strong>Rack</strong><br></label><input class="form-control" type="text" placeholder="rack id" name="rack_id" required></div>
                         </div>
                         <div class="col-xl-1"></div>
                         <div class="col">
                            <div class="form-group"><label for="last_name"><strong>Position</strong><br></label><input class="form-control" type="text" placeholder="position on rack" name="position" required></div>
                         </div>
                      </div>
                      <div class="form-row">
                         <div class="col">
                            <div class="form-group">
                               <label for="first_name"><strong>Video Port</strong><br></label>
                               <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" name="video_port" required>
                                  <option selected></option>
                                  <option value="/dev/vid0">/dev/vid0</option>
                                  <option value="2">/dev/vid1</option>
                                  <option value="3">/dev/vid2</option>
                               </select>
                            </div>
                         </div>
                         <div class="col-xl-1"></div>
                         <div class="col">
                            <div class="form-group">
                               <label for="last_name"><strong>Management Port</strong><br></label>
                               <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" name="mgnt_port" required>
                                  <option selected></option>
                                  <option value="1">/dev/tty0</option>
                                  <option value="2">/dev/tty1</option>
                                  <option value="3">/dev/tty2</option>
                               </select>
                            </div>
                         </div>
                      </div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button  class="btn btn-primary" type="submit">Save</button>
                </div>
                </form>
             </div>
          </div>
       </div>
       <!-- End add server modal  -->
       <div class="card-body">
          <div class="row">
             <div class="col-md-6 text-nowrap">
                <div id="dataTable_length" class="dataTables_length" aria-controls="dataTable"><label>Show 
                   <select class="form-control form-control-sm custom-select custom-select-sm" id="selectboxperpage">
                   <option value="/perpage?val=5" {% if pagination.per_page == 5 %} selected {% endif %}>5</option>
                   <option value="/perpage?val=10" {% if pagination.per_page == 10 %} selected {% endif %}>10</option>
                   <option value="/perpage?val=25" {% if pagination.per_page == 25 %} selected {% endif %}>25</option>
                   <option value="/perpage?val=50" {% if pagination.per_page == 50 %} selected {% endif %}>50</option>
                   </select> </label>
                </div>
             </div>
             <div class="col-md-6">
                <div class="text-md-right dataTables_filter" id="dataTable_filter"><label><input type="search" class="form-control form-control-sm" aria-controls="dataTable" placeholder="Search"></label></div>
             </div>
          </div>
          <div class="table-responsive table mt-2" id="dataTable" role="grid" aria-describedby="dataTable_info">
             <table class="table my-0" id="dataTable">
                <thead>
                   <tr>
                      <!-- <th style="width: 85px;">Select</th> -->
                      <th>Hostname</th>
                      <th>Datacenter</th>
                      <th>Rack</th>
                      <th>Position</th>
                      <th>Status</th>
                      <th>Manage</th>
                   </tr>
                </thead>
                <tbody>
                   {% for server in pagination.items %}
                   <tr>
                      <!-- <td><input type="radio" style="width: 43px;height: 26px;"></td> -->
                      <td> {{ server.hostname}}</td>
                      <td> {{ server.datacenter}} </td>
                      <td> {{ server.rack}} </td>
                      <td>{{ server.position}} </td>
                      <td>{{ server.status}}</td>
                      <td><button class="btn btn-primary" type="button" href="#" >More</button></td>
                   </tr>
                   {% endfor %}
                </tbody>
                <tfoot>
                   <tr>
                      <!-- <td></td> -->
                      <td><strong>Hostname</strong></td>
                      <td><strong>Datacenter</strong></td>
                      <td><strong>Rack</strong></td>
                      <td><strong>Position</strong></td>
                      <td><strong>Status</strong></td>
                      <td><strong>Manage</strong></td>
                   </tr>
                </tfoot>
             </table>
          </div>
          <div class="row">
             <div class="col-md-6 align-self-center">
                <p id="dataTable_info" class="dataTables_info" role="status" aria-live="polite">Showing {{minInPage}} to {{maxInPage }} of {{pagination.total}}</p>
             </div>
             <div class="col-md-6">
                <nav class="d-lg-flex justify-content-lg-end dataTables_paginate paging_simple_numbers">
                   <ul class="pagination">
                      {% if pagination.prev_num == None %}
                      <li class="page-item disabled"><a class="page-link" href="/list/{{pagination.prev_num}}" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
                      {% else %}
                      <li class="page-item"><a class="page-link" href="/list/{{pagination.prev_num}}" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
                      {% endif %}
                      {%- for page in pagination.iter_pages() %}
                      {% if page %}
                      {% if page != pagination.page %}
                      <li class="page-item"><a class="page-link" href="/list/{{page}}"> {{ page }}</a></li>
                      {% else %}
                      <li class="page-item active"><a class="page-link" href="#"> {{ page }}</a></li>
                      {% endif %}
                      {% else %}
                      <span class=ellipsis>…</span>
                      {% endif %}
                      {%- endfor %}
                      {% if pagination.next_num == None %}
                      <li class="page-item disabled"><a class="page-link" href="/list/{{pagination.next_num}}" aria-label="Next"><span aria-hidden="true">»</span></a></li>
                      {% else %}
                      <li class="page-item"><a class="page-link" href="/list/{{pagination.next_num}}" aria-label="Next"><span aria-hidden="true">»</span></a></li>
                      {% endif %}
                   </ul>
                </nav>
             </div>
          </div>
       </div>
    </div>
 </div>
 {% endblock %}

 {% block scripts %}
 <script> 
    $('#selectboxperpage').on('change', function () {
        var url = $(this).val();
        window.location = url; 
    });
 </script>
 {% endblock %}